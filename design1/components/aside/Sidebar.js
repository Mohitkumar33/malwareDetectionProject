// components/aside/Sidebar.js
import React, { useState } from "react";
import { Box, Flex, VStack, Text, Link, Spacer } from "@chakra-ui/react";
import {
  FiHome,
  FiUpload,
  FiUsers,
  FiBookOpen,
  FiShield,
  FiActivity,
  FiPlayCircle,
  FiLogOut,
} from "react-icons/fi"; // Import necessary icons

const Sidebar = () => {
  // State to track the active tab
  const [activeTab, setActiveTab] = useState("/"); // Default active tab is Dashboard

  // Function to handle tab click
  const handleTabClick = (href) => {
    setActiveTab(href);
  };

  return (
    <Box
      as="aside"
      position="fixed"
      left={0}
      top={0}
      height="100vh"
      width="250px"
      bg="teal.500"
      color="white"
      padding={4}
      display="flex"
      flexDirection="column"
      alignItems="center" // Center items horizontally
    >
      {/* Logo Section */}
      <Flex alignItems="center" mb={8}>
        <Text fontSize="2xl" fontWeight="bold">
          ZeroThreat
        </Text>
      </Flex>

      {/* Navigation Links */}
      <VStack spacing={4} align="center" w="full">
        <SidebarLink
          href="/"
          icon={FiHome}
          label="Dashboard"
          active={activeTab === "/"}
          onClick={handleTabClick}
        />
        <SidebarLink
          href="/upload"
          icon={FiUpload}
          label="Upload"
          active={activeTab === "/upload"}
          onClick={handleTabClick}
        />
        <SidebarLink
          href="/user-management"
          icon={FiUsers}
          label="User Management"
          active={activeTab === "/user-management"}
          onClick={handleTabClick}
        />
        <SidebarLink
          href="/prediction-history"
          icon={FiBookOpen}
          label="Prediction History"
          active={activeTab === "/prediction-history"}
          onClick={handleTabClick}
        />
        <SidebarLink
          href="/threats-detected"
          icon={FiShield}
          label="Threats Detected"
          active={activeTab === "/threats-detected"}
          onClick={handleTabClick}
        />
        <SidebarLink
          href="/blogs"
          icon={FiActivity}
          label="Blogs"
          active={activeTab === "/blogs"}
          onClick={handleTabClick}
        />
        <SidebarLink
          href="/video-lecture"
          icon={FiPlayCircle}
          label="Video Lecture"
          active={activeTab === "/video-lecture"}
          onClick={handleTabClick}
        />
      </VStack>

      {/* Spacer to push the Logout link to the bottom */}
      <Spacer />

      {/* Logout Link */}
      <SidebarLink
        href="/logout"
        icon={FiLogOut}
        label="Logout"
        active={activeTab === "/logout"}
        onClick={handleTabClick}
      />
    </Box>
  );
};

// Component to render individual links in the sidebar
const SidebarLink = ({ href, icon, label, active, onClick }) => (
  <Link
    href={href}
    style={{ textDecoration: "none", width: "100%" }}
    onClick={() => onClick(href)}
  >
    <Flex
      align="center"
      justify="center"
      padding={3}
      borderRadius="md"
      bg={active ? "teal.600" : "transparent"} // Change background color if active
      _hover={{ bg: "teal.700" }} // Change hover color
      width="full"
    >
      {React.createElement(icon, { size: 20 })} {/* Render the passed icon */}
      <Text ml={3}>{label}</Text>
    </Flex>
  </Link>
);

export default Sidebar;
